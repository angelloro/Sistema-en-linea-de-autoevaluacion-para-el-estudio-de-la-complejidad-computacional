<!CGS>
<!Angel Loro>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
    <head>
        <title>CGS</title>
        <link rel="stylesheet" th:href="@{/webjars/bootstrap/css/bootstrap.min.css}" type="text/css">
            <style>
                body {font-family: Arial, Helvetica, sans-serif;background: #808080; text-align: center;font-size: 20px}
                h1{
                    color:#FFFFFF;
                }
                .table-striped tbody tr:hover{
                    background-color: #508723;

                }

                button {

                    color:#FFFFFF ;
                    background-color: #508723;
                    padding: 14px 20px;
                    margin: 8px 0;
                    border: none;
                    cursor: pointer;
                    width: 75%;
                }

                button:hover {
                    opacity: 0.8;
                }


                .radio input[type=radio] {
                    display: none;

                }

                .radio label {

                    display: inline-block;
                    text-align: center;
                    margin: 4px;
                    padding: 8px;
                    background:  #FFFFFF;
                    color: #000000;
                    width: 75%;

                }

                .radio label:hover {
                    background: #808080;
                }

                .radio input[type=radio]:checked+label {
                    background: #000000;
                    color: #FFFFFF;
                    border-style: solid;
                    border-color: #efb810;
                    border-width: 3px;

                }
                .radio button {

                    color:#FFFFFF ;
                    background-color: #006600;
                    padding: 14px 20px;
                    margin: 8px 0;
                    border: none;
                    cursor: pointer;
                    width: 65%;

                }

                .radio button:hover {
                    opacity: 0.8;
                }

                .modal {
                    display: none; /* Hidden by default */
                    position: fixed; /* Stay in place */                   
                    padding-top: 100px; /* Location of the box */                   
                    width: 100%; /* Full width */
                    height: 100%; /* Full height */
                    overflow: auto; /* Enable scroll if needed */
                    background-color: rgb(0,0,0); /* Fallback color */
                    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
                }

                .modal-content {
                    
                    position: relative;
                    background-color: #FFFFFF;
                    margin: auto;
                    padding: 0;
                    border: 1px solid #888;
                    width: 70%;       
                   
                   

                }
                .close {

                    color: white;
                    float: right;
                    font-size: 28px;
                    font-weight: bold;
                }

                .close:hover,
                .close:focus {
                    color: #FFFFFF;
                    text-decoration: none;
                    cursor: pointer;
                }

                .modal-header {
                    
                   
                    padding: 2px 16px;
                    background-color: #000000;
                    color: white;
                }
                

                .modal-body {padding: 2px 16px;}
                


            </style>
    </head>
    <body>
        <!--  <form th:action="@{/generador1}" th:object="${generador}" method="POST" enctype="utf8">-->
        <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
            <a class="navbar-brand" th:href="@{/}">GenTool</a>
            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#collapsibleNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="collapsibleNavbar">
                <ul class="navbar-nav">                  
                    <li class="nav-item">
                        <a class="nav-link" th:href="@{/generador}">Generador</a>
                    </li>
                    <li  sec:authorize="hasAuthority('Profesor')" class="nav-item">
                        <a class="nav-link" th:href="@{/users}">Usuarios</a>
                    </li>
                    <li  sec:authorize="isAuthenticated()" class="nav-item">
                        <a class="nav-link" th:href="@{/generadorAlumno}">Ej. Propuestos</a>
                    </li>

                </ul>
            </div>  
            <ul class="nav navbar-nav navbar-right">
                <li sec:authorize="!isAuthenticated()">
                    <a th:href="@{/login}" style="color:#508723">Login</a>
                </li>
                <li sec:authorize="isAuthenticated()">
                    <a th:href="@{/logout}" style="color:#cc0000">Logout</a>
                </li>
            </ul>          
        </nav>


        <div>
            <code>
                <pre style="text-align:left" th:text="${generador.getCodigo()}"></pre>
                </code>
        </div>
             <div class="radio">
                <div class="opciones">
                <input  type="radio" name="opcion" id="opcion1"  th:value="${generador.getLista().get(0)}" />
                <label name="label" for="opcion1"th:text="${generador.getLista().get(0)}"  >   </label>

                <input  type="radio" name="opcion" id="opcion2" th:value="${generador.getLista().get(1)}" />
                <label name="label" for="opcion2" th:text="${generador.getLista().get(1)}" >  </label>

                <input   type="radio" name="opcion" id="opcion3" th:value="${generador.getLista().get(2)}"  />
                <label name="label" for="opcion3" th:text="${generador.getLista().get(2)}" > </label>

                 <input   type="radio" name="opcion" id="opcion4"  th:value="${generador.getLista().get(3)}" />
                <label name="label"  for="opcion4" th:text="${generador.getLista().get(3)}" >  </label>
                </div>
                <button id="boton" onclick="funcionMostrar()" >Corregir</button>
              </div>
        <script th:inline="javascript">
            function funcionMostrar() {
                var explicacion = document.getElementById("explicacion");
                if (explicacion.style.display === "none") {
                    explicacion.style.display = "block";
                }
                var boton = document.getElementById("boton");
                boton.disabled = true;
                var radio = document.getElementsByName("opcion");

                var r = /*[[${generador.valor()}]]*/'default';
                for (var i = 0; i < radio.length; i++) {
                    radio[i].disabled = true;
                    if (radio[i].checked) {



                        if (r == radio[i].value) {
                            document.getElementById("modal-head").innerHTML = "<h2>Has acertado</h2>  <span class='close'>&times;</span>";
                            document.getElementById("modal-head").style.backgroundColor = "green";
                            //var t = document.getElementById(radio[i].htmlFor);
                            // console.log(t);
                            //t.style.backgroundColor = "red";
                        } else {
                            document.getElementById("modal-head").innerHTML = " <h2>Has fallado</h2> <span class='close'>&times;</span>";
                            document.getElementById("modal-head").style.backgroundColor = "#eb0000";
                        }

                    }

                }
                var labels = document.getElementsByName("label");
                for (var c = 0; c < labels.length; c++) {


                    var rad = document.getElementById(labels[c].htmlFor);

                    if (r == rad.value) {
                        labels[c].style.backgroundColor = "green";
                    } else {
                        labels[c].style.backgroundColor = "#eb0000";
                    }


                }
                var modal = document.getElementById("myModal");

                modal.style.display = "block";

                var span = document.getElementsByClassName("close")[0];
                //Cerrar modal al pulsar en la X
                span.onclick = function () {
                    modal.style.display = "none";
                   
                }
                //Cerrar el modal al pulsar fuera del mismo
                window.onclick = function (event) {
                    if (event.target == modal) {
                        modal.style.display = "none";

                    }
                }
            }
                </script>
        <div id="myModal" class="modal">

                <!-- Modal content -->
                <div class="modal-content" >
                  <div class="modal-header"id="modal-head">                      
                      <h2>Ninguna opcion seleccionada</h2>
                      <span class='close'>&times;</span>
                  </div>
                  <div class="modal-body" id="modal-body">
                    <a class="btn  btn-block btn-dark" href="" role="button">Volver a generar codigo con los mismos valores</a> 
                    <a class="btn  btn-block btn-dark" th:href="@{/generador}" role="button">Generar codigo diferente</a> 
                  </div>

                </div>
         </div> 
        <pre id="explicacion" class= "explicacion" style = "display:none"  th:text="${generador.correccion()}"> </pre>

     
        
          
            
            <!--<input type="submit" value="corregir" />    <button >Corregir</button>              style="display:none;  
            
            
            <p>Click <a th:href="@{/home}">aqui</a> para volver al inicio .</p>
            
            -->
            
               <script th:src="@{/webjars/jquery/jquery.min.js}"></script>
            <script th:src="@{/webjars/bootstrap/js/bootstrap.min.js}"></script>
       <!-- </form>-->
    </body>
</html>